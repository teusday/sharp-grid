<link rel="import" href="sharp-grid.html">
<link rel="import" href="../../bower_components/vibrant/">
<script src="../../bower_components/vibrant/dist/Vibrant.min.js"></script>

<dom-module id="sharp-grid-item">
    <template>
        <style>
            :host {
                display: inline-block;
            }
            
            .grid-rectangle {
                width: 200px;
                height: 267px;
            }
            
            .text-box-container {
             background-color: lightslategray;
            }
            
            .image-box {
                width: inherit;
                height: 75%;
            }
            
            .text-box {
                width: inherit;
                height: 75%;
                overflow: scroll;
            }
            
            .text-box(.is-scrolled:not(:first-child))::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 1px;
                background: var(--divider-color);
            }
            
            .text-box(.can-scroll:not(.scrolled-to-bottom):not(:last-child))::after {
                content: '';
                position: absolute;
                bottom: 0;
                left: 0;
                right: 0;
                height: 1px;
                background: var(--divider-color);
            }
            
            @media (max-width: 600px) {
                h1.paper-font-display1 {
                    font-size: 24px;
                }
            }

        </style>
        <template is="dom-if" if="{{text}}">
            <div class="grid-rectangle text-box-container">
                <div class="text-box">{{text}}</div>
                <!--                <paper-dialog-scrollable class="text-box">{{text}}</paper-dialog-scrollable>-->
                <div>{{footer}}</div>
            </div>
        </template>
        <template is="dom-if" if="{{image}}">
            <div class="grid-rectangle" id="foo">
                <img class="image-box" src="{{image}}" alt="{{alt}}">
                <div>{{footer}}</div>
            </div>
        </template>
    </template>

</dom-module>

<script>
    Polymer({
        is: 'sharp-grid-item',

        behaviors: [
            Polymer.IronResizableBehavior
        ],

        properties: {

            image: {
                type: String,
                value: false
            },

            alt: String,

            text: {
                type: String,
                value: false
            },

            footer: String,

        },

        listeners: {
            'iron-resize': 'resize'
        },

        resize: function(e) {
            var parent = Polymer.dom(this).parentNode;
            var optimalHeight = Math.ceil(parent.optimalWidth * 4 / 3);
            var contentHeight = parent.optimalWidth;

            var x = document.getElementsByClassName("grid-rectangle");
            for (var i = 0; i < x.length; i++) {
                x[i].style.width = parent.optimalWidth + "px";
                x[i].style.height = optimalHeight + "px";
            }

            var y = document.getElementsByClassName("image-box");
            console.log("sharp-image [0]:" + document.getElementsByClassName("image-box")[0]);
            var foo = document.getElementsByClassName("image-box")[0].style;
            console.log("foo:" + foo);
            for (var i = 0; i < y.length; i++) {
                y[i].style.height = contentHeight;
                console.log(contentHeight);
                y[i].style.width = parent.optimalWidth;
            };

            var z = document.getElementsByClassName("text-box");
            for (var i = 0; i < z.length; i++) {
            };
        }
    });

</script>
